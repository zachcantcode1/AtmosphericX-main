<!DOCTYPE html>
<html>
    <title>AtmosphericX</title>
    <link rel="icon" href="/assets/media/dashboard/favicon.ico" type="image/x-icon">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/howler/2.2.4/howler.min.js"></script>
    <link rel="stylesheet" href="../widgets/alert_bar@widget/index.css">
    <link rel="stylesheet" href="../../assets/styles/variables.css">
    <script src="../../assets/javascript/alerts.js"></script>
    <script src="../../assets/javascript/library.js"></script>
    <body>
        <div class="alert-bar-top">
            <span class="alert-type" id="event-name"></span>
            <span class="alert-separator">|</span>
            <span class="alert-location-label">Location:</span> <span class="alert-location" id="event-locations"></span>
            <span class="alert-separator">|</span>
            <span class="alert-hail-label">Hail:</span> <span class="alert-hail" id="event-max-hail"></span>
            <span class="alert-separator">|</span>
            <span class="alert-wind-label">Wind:</span> <span class="alert-wind" id="event-max-wind"></span>
        </div>
    </body>
    <script>
        let library = new Library()
        library.createWebsocketSession([`public`, `active`, `manual`]).then(() => {
            let alert_class = new Alerts(library, true)
            library.detectMobileDevice() 
            document.addEventListener('onCacheUpdate', async (event) => {
                let storage = alert_class.syncAlerts()
                if (storage.length > 0) { await alert_class.triggerAlertQueue() }
            })
        })
    </script>
</html>